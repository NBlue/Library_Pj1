<header class="header">
    <div class="grid">
        <div class="navbar">
            <section class="logo">
                <a href="/" class="logo-link">
                    <img class="logo-img" src="/img/logo.png" alt="Logo" />
                </a>
            </section>
            <div class="navbar-control">
                <div class="navbar-list">
                    <!-- Navbar trong giao dien nguoi dung -->
                    <div class="navbar-client">
                        <div class="navbar-item">
                            <a href="/" class="navbar-link">TRANG CHỦ</a>
                        </div>
                        <div class="navbar-item">
                            <a href="/books" class="navbar-link">SÁCH</a>
                            <ul class="navbar-item-list">
                                <li class="navbar-item-item">
                                    <a href="/books/ctr_pl" class="navbar-item-link">Chính trị - Pháp luật</a>
                                </li>
                                <li class="navbar-item-item">
                                    <a href="/books/khcn_kt" class="navbar-item-link">Khoa học công nghệ - Kinh tế</a>
                                </li>
                                <li class="navbar-item-item">
                                    <a href="/books/vhnt" class="navbar-item-link">Văn học nghệ thuật</a>
                                </li>
                                <li class="navbar-item-item">
                                    <a href="/books/vhxh" class="navbar-item-link">Văn hóa xã hội - Lịch sử</a>
                                </li>
                                <li class="navbar-item-item">
                                    <a href="/books/gtr" class="navbar-item-link">Giáo trình</a>
                                </li>
                                <li class="navbar-item-item">
                                    <a href="/books/t_tth" class="navbar-item-link">Truyện, tiểu thuyết</a>
                                </li>
                                <li class="navbar-item-item">
                                    <a href="/books/tl_tg" class="navbar-item-link">Tâm lý, tâm linh, tôn giáo</a>
                                </li>
                                <li class="navbar-item-item">
                                    <a href="/books/stn" class="navbar-item-link">Sách thiếu nhi</a>
                                </li>
                            </ul>
                        </div>
                        <div class="navbar-item">
                            <a href="/authors" class="navbar-link">TÁC GIẢ</a>
                        </div>
                        <!-- <div class="navbar-item">
                                        <a href="" class="navbar-link">CONTACT</a>
                                    </div> -->
                    </div>
                    <!-- Navbar trong admin manager -->
                    <div class="navbar-admin">
                        <div class="navbar-item">
                            <a href="/admin/books" class="navbar-link">Quản lí sách
                                <i class="navbar-item_icon fas fa-book-open"></i>
                            </a>
                        </div>
                        <div class="navbar-item">
                            <a href="/admin/authors" class="navbar-link">Quản lí tác giả
                                <i class="navbar-item_icon fas fa-feather-alt"></i></a>
                        </div>
                        <div class="navbar-item">
                            <a href="/admin/users" class="navbar-link">Quản lí người dùng
                                <i class="navbar-item_icon fas fa-user"></i></a>
                        </div>
                    </div>
                    <div class="line" style="width: 0"></div>
                </div>
                <div class="navbar-group">
                    <div class="search-wrap">
                        <input
                            type="text"
                            class="search-input"
                            placeholder="Search....."
                        />
                        <div class="search-btn">
                            <i class="search-icon fas fa-search"></i>
                        </div>
                    </div>
                    <div class="navbar-user">
                        <div class="noti">
                            <section class="bell-noti">
                                <i class="fa fa-bell bell-noti-icon"></i>
                                <div class="bell-noti-status"></div>
                            </section>
                        </div>
                        <div class="cart">
                            <section class="cart-btn">
                                <i class="store-icon fas fa-store"></i>
                                <span class="cart-quantity">0</span>
                            </section>
                        </div>
                        <div class="user">
                            <section class="not-login">
                                <a href="/login" class="">Đăng nhập</a>
                            </section>
                            <section data-id="{{data.IdUser}}" class="user-login active">
                                <i class="user-icon fas fa-user-circle"></i>
                                {{!-- <img class="user-avatar" src="/img/other/avatar_default.jpg" alt=""> --}}
                                <p class="user-name">{{data.Username}}</p>
                            </section>
                            <ul class="user__list">
                                <li class="user__item"><a
                                        href=""
                                        class="user__item-link"
                                    >Tài khoản của tôi</a></li>
                                <li class="user__item user__back"><a
                                        href="http://localhost:3000/login"
                                        class="user__item-link"
                                    >Đăng xuất</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<script>
    window.onload = function () { 
        const line = document.querySelector(".navbar-list .line");
        const navAdmin = document.querySelector(".navbar-admin");
        const navClient = document.querySelector(".navbar-client");
        const containerUser = document.querySelector(".container-users");
        const containerAdmin = document.querySelector(".container-admin");
        const BackAcc = document.querySelector(".navbar-user .user__back");

        if(containerAdmin != null){
            navAdmin.classList.add("active");
            navClient.classList.remove("active");
            const adminBook = document.querySelector(".admin-books");
            const adminUser = document.querySelector(".admin-users");
            const adminAuthor = document.querySelector(".admin-authors");
            var count;
            if(adminAuthor != null){
                count = 2;
            } else if(adminUser != null){
                count = 3
            } else if(adminBook != null){
                count = 1;
            }
            console.log(count);
            const tabs = document.querySelectorAll(".navbar-admin .navbar-item");
            tabs.forEach((tab, index) => {
                if(index + 1 === count ){
                    tab.classList.add("active"); 
                    line.style.left = tab.offsetLeft + "px";
                    line.style.width = tab.offsetWidth + "px";
                }
            })
            

        }
        if(containerUser != null){
            navClient.classList.add("active");
            navAdmin.classList.remove("active");
        }

        /* const tabsbtn = document.querySelectorAll(".navbar-item");
        tabsbtn.forEach((tabbtn, index) => {
            tabbtn.addEventListener('click', (e)=> {
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function() {
                //if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                    console.log("Trạng thái:" + xmlHttp.responseText)
                el.innerHTML = xmlHttp.responseText
            }
            {{!-- xmlHttp.open("GET", '/test', true);
            xmlHttp.send(null); --}}
        }) */
    }
</script>